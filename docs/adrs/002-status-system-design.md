# ADR-002: تصميم نظام الحالات لسير عمل الشكاوى

**التاريخ:** 2025-09-26  
**الحالة:** مقبول  
**المقرر:** فريق تطوير نائبك  

## السياق والمشكلة

نظام إدارة الشكاوى يحتاج إلى نظام حالات واضح ومرن يدعم سير العمل من تقديم الشكوى حتى الحل النهائي. النظام يجب أن يحقق المتطلبات التالية:

**متطلبات المستخدمين:** وضوح حالة الشكوى في كل مرحلة مع إمكانية تتبع التقدم بسهولة. **متطلبات الإدارة:** مرونة في إدارة سير العمل مع إمكانية قياس الأداء والكفاءة. **متطلبات النظام:** دعم التوسع المستقبلي وإضافة حالات جديدة دون تعقيد.

## البدائل المدروسة

### البديل الأول: نظام حالات بسيط (3 حالات)
يتضمن حالات أساسية فقط: مفتوحة، قيد المعالجة، مغلقة. هذا النهج يوفر البساطة والسهولة في التطبيق مع سرعة في الفهم للمستخدمين الجدد. ومع ذلك، فإنه يفتقر للتفصيل المطلوب في البيئة الحكومية ولا يدعم سير العمل المعقد المطلوب لمتابعة الشكاوى بدقة.

### البديل الثاني: نظام حالات مفصل (7+ حالات)
يشمل حالات تفصيلية تغطي كل مرحلة من مراحل معالجة الشكوى. يوفر هذا النهج تتبعاً دقيقاً لسير العمل مع مرونة في الإدارة وإمكانية قياس الأداء بدقة. التحدي الرئيسي هو التعقيد المحتمل للمستخدمين والحاجة لتدريب أكثر.

### البديل الثالث: نظام حالات هجين مع مجموعات
يجمع بين البساطة والتفصيل من خلال تجميع الحالات في فئات رئيسية. يوفر مرونة في العرض حسب نوع المستخدم مع إمكانية التوسع المستقبلي.

## القرار المتخذ

تم اختيار **البديل الثاني: نظام حالات مفصل** مع التطبيق التالي:

### الحالات المعتمدة:

**pending (في الانتظار)** - الحالة الافتراضية عند تقديم الشكوى. تشير إلى أن الشكوى تم استلامها وتنتظر المراجعة الأولية من قبل فريق الدعم.

**under_review (قيد المراجعة)** - بدء المراجعة الإدارية للشكوى. يتم فيها التحقق من صحة البيانات وتصنيف الشكوى وتحديد الجهة المختصة.

**assigned (تم التعيين)** - تعيين مسؤول أو ممثل للمتابعة. تشير إلى أن الشكوى وصلت للشخص المناسب وأصبحت في قائمة مهامه.

**in_progress (قيد التنفيذ)** - بدء العمل الفعلي على حل الشكوى. المسؤول المعين يعمل على معالجة المشكلة أو التواصل مع الجهات ذات العلاقة.

**resolved (تم الحل)** - انتهاء معالجة الشكوى بنجاح. تم حل المشكلة أو تقديم الرد المناسب للمشتكي مع إمكانية التقييم.

**rejected (مرفوضة)** - رفض الشكوى لأسباب محددة. قد تكون الشكوى خارج نطاق الاختصاص أو غير مكتملة البيانات أو مكررة.

**closed (مغلقة)** - إغلاق نهائي للشكوى. تستخدم للشكاوى المحلولة التي تم تأكيد رضا المشتكي عنها أو انتهت فترة المتابعة.

### التطبيق التقني:
```python
STATUS_CHOICES = [
    ('pending', 'في الانتظار'),
    ('under_review', 'قيد المراجعة'),
    ('assigned', 'تم التعيين'),
    ('in_progress', 'قيد التنفيذ'),
    ('resolved', 'تم الحل'),
    ('rejected', 'مرفوضة'),
    ('closed', 'مغلقة'),
]

status = models.CharField('الحالة', max_length=20, choices=STATUS_CHOICES, default='pending')
```

## المبررات

**الوضوح والشفافية** يوفر النظام رؤية واضحة لكل مرحلة من مراحل معالجة الشكوى، مما يزيد من ثقة المواطنين في النظام الحكومي. **قياس الأداء** يمكن قياس الكفاءة في كل مرحلة وتحديد نقاط الاختناق في سير العمل. **المرونة الإدارية** يسمح للمديرين بإدارة سير العمل بدقة وتوزيع المهام بفعالية. **التوافق مع المعايير** يتماشى مع أفضل الممارسات في إدارة الشكاوى الحكومية.

## العواقب

### النتائج الإيجابية:

**تحسين تجربة المستخدم** من خلال التتبع الدقيق لحالة الشكوى والتحديثات المنتظمة. **زيادة الكفاءة الإدارية** عبر تنظيم سير العمل وتوضيح المسؤوليات في كل مرحلة. **تحسين الشفافية** من خلال إتاحة معلومات واضحة عن مراحل معالجة الشكاوى. **دعم اتخاذ القرارات** بناءً على بيانات دقيقة عن أداء النظام.

### النتائج السلبية:

**تعقيد أولي** قد يحتاج المستخدمون والموظفون لوقت للتكيف مع النظام الجديد. **حاجة للتدريب** لضمان الاستخدام الصحيح لكل حالة من قبل الموظفين. **إدارة التحولات** الحاجة لضوابط واضحة لانتقال الشكوى بين الحالات.

### استراتيجيات التخفيف:

**برنامج تدريب شامل** للموظفين على استخدام النظام الجديد مع أدلة مرجعية واضحة. **واجهة مستخدم بديهية** تجعل فهم الحالات والانتقال بينها أمراً طبيعياً. **نظام إشعارات ذكي** يرسل تحديثات تلقائية للمستخدمين عند تغيير حالة شكاواهم. **مراقبة مستمرة** لأداء النظام وتحسينه بناءً على التغذية الراجعة.

## قواعد الانتقال بين الحالات

### الانتقالات المسموحة:
- **pending → under_review:** بدء المراجعة الإدارية
- **under_review → assigned:** تعيين مسؤول للمتابعة  
- **under_review → rejected:** رفض الشكوى لأسباب محددة
- **assigned → in_progress:** بدء العمل على الحل
- **in_progress → resolved:** إنجاز الحل
- **in_progress → rejected:** رفض بعد المراجعة التفصيلية
- **resolved → closed:** إغلاق نهائي بعد التأكد من الرضا

### الانتقالات المحظورة:
- العودة من **resolved** إلى حالات سابقة (إلا في حالات استثنائية)
- الانتقال المباشر من **pending** إلى **resolved**
- تغيير الحالة دون صلاحيات مناسبة

## المراجعة والتقييم

### معايير النجاح:
- تحسن في أوقات معالجة الشكاوى
- زيادة رضا المستخدمين عن وضوح المتابعة
- تحسن في كفاءة توزيع المهام

### جدولة المراجعة:
- **مراجعة أولى:** بعد شهرين من التطبيق
- **مراجعة دورية:** كل 3 أشهر
- **تحسينات:** بناءً على التغذية الراجعة المستمرة

---

**آخر تحديث:** 2025-09-26  
**المسؤول:** فريق تطوير نائبك
