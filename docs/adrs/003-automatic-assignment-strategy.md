# ADR-003: استراتيجية التعيين التلقائي للشكاوى

**التاريخ:** 2025-09-26  
**الحالة:** مقبول  
**المقرر:** فريق تطوير نائبك  

## السياق والمشكلة

نظام إدارة الشكاوى يحتاج إلى آلية ذكية لتعيين الشكاوى تلقائياً للممثلين والمسؤولين المناسبين. النظام يجب أن يحقق التوزيع العادل للأعباء مع ضمان وصول كل شكوى للشخص الأنسب للتعامل معها.

**التحديات الرئيسية:** تنوع أنواع الشكاوى وتخصصاتها المختلفة، التوزيع الجغرافي للممثلين عبر المحافظات، ضرورة التوازن في أعباء العمل بين الممثلين، والحاجة لمراعاة مستويات الأولوية المختلفة للشكاوى.

## البدائل المدروسة

### البديل الأول: التعيين اليدوي الكامل
يتم تعيين كل شكوى يدوياً من قبل المديرين أو المشرفين. هذا النهج يوفر مرونة كاملة في اتخاذ القرارات مع إمكانية مراعاة الظروف الخاصة لكل حالة. ومع ذلك، فإنه يتطلب وقتاً كبيراً من المديرين ويؤدي إلى تأخير في معالجة الشكاوى، كما أنه عرضة للأخطاء البشرية والتحيز.

### البديل الثاني: التعيين التلقائي البسيط (Round Robin)
يتم توزيع الشكاوى بالتناوب على جميع الممثلين المتاحين. يوفر هذا النهج البساطة في التطبيق مع ضمان التوزيع العادل للأعباء. لكنه لا يراعي التخصصات أو المناطق الجغرافية ولا يأخذ في الاعتبار مستوى الأولوية أو تعقيد الشكاوى.

### البديل الثالث: التعيين الذكي متعدد المعايير
يستخدم خوارزمية متقدمة تراعي عدة عوامل في التعيين. يوفر هذا النهج دقة عالية في التوزيع مع مراعاة جميع العوامل المهمة وإمكانية التحسين المستمر. التحدي الرئيسي هو التعقيد في التطبيق والحاجة لضبط دقيق للمعايير.

## القرار المتخذ

تم اختيار **البديل الثالث: التعيين الذكي متعدد المعايير** مع التطبيق التدريجي:

### المعايير الأساسية للتعيين:

**المعيار الجغرافي (وزن 40%)** - تعيين الشكاوى للممثلين من نفس المحافظة أو المنطقة الجغرافية. يضمن هذا المعيار فهماً أفضل للسياق المحلي والقدرة على المتابعة الميدانية عند الحاجة.

**معيار التخصص (وزن 30%)** - مطابقة نوع الشكوى مع تخصص أو خبرة الممثل. الممثلون المتخصصون في الصحة يحصلون على شكاوى صحية، والمتخصصون في التعليم يحصلون على شكاوى تعليمية.

**معيار عبء العمل (وزن 20%)** - توزيع الشكاوى بناءً على العدد الحالي للشكاوى المعينة لكل ممثل. يضمن عدم تحميل ممثل واحد أكثر من طاقته بينما آخرون أقل انشغالاً.

**معيار الأولوية (وزن 10%)** - الشكاوى العاجلة تذهب للممثلين الأكثر خبرة أو المتاحين فوراً. يضمن المعالجة السريعة للحالات الحرجة.

### خوارزمية التعيين:

```python
def assign_complaint_automatically(complaint):
    # 1. تصفية الممثلين المؤهلين
    eligible_representatives = filter_by_governorate(complaint.governorate)
    eligible_representatives = filter_by_specialization(eligible_representatives, complaint.complaint_type)
    
    # 2. حساب النقاط لكل ممثل
    scored_representatives = []
    for rep in eligible_representatives:
        score = calculate_assignment_score(rep, complaint)
        scored_representatives.append((rep, score))
    
    # 3. اختيار الممثل الأعلى نقاطاً
    best_representative = max(scored_representatives, key=lambda x: x[1])[0]
    
    # 4. تعيين الشكوى
    complaint.assigned_to = best_representative
    complaint.status = 'assigned'
    complaint.assigned_at = timezone.now()
    complaint.save()
    
    return best_representative

def calculate_assignment_score(representative, complaint):
    score = 0
    
    # معيار جغرافي (40%)
    if representative.governorate == complaint.governorate:
        score += 40
    elif representative.region == complaint.governorate.region:
        score += 20
    
    # معيار التخصص (30%)
    if complaint.complaint_type.category in representative.specializations:
        score += 30
    elif complaint.complaint_type.target_council == representative.council:
        score += 15
    
    # معيار عبء العمل (20%)
    current_load = representative.assigned_complaints.filter(
        status__in=['assigned', 'in_progress']
    ).count()
    max_load = representative.max_concurrent_complaints
    load_ratio = current_load / max_load if max_load > 0 else 1
    score += 20 * (1 - load_ratio)
    
    # معيار الأولوية (10%)
    if complaint.priority == 'urgent' and representative.handles_urgent:
        score += 10
    elif complaint.priority == 'high' and representative.experience_level >= 3:
        score += 7
    
    return score
```

## المبررات

**الكفاءة والسرعة** يقلل النظام التلقائي من وقت التعيين ويضمن المعالجة السريعة للشكاوى دون انتظار التدخل اليدوي. **العدالة في التوزيع** يضمن توزيعاً عادلاً للأعباء بين جميع الممثلين مع مراعاة قدراتهم وتخصصاتهم. **تحسين جودة الخدمة** من خلال توجيه كل شكوى للشخص الأنسب للتعامل معها بناءً على الخبرة والموقع. **المرونة والتكيف** يمكن تعديل المعايير والأوزان بناءً على التجربة والنتائج المحققة.

## العواقب

### النتائج الإيجابية:

**تسريع معالجة الشكاوى** من خلال التعيين الفوري دون انتظار التدخل اليدوي. **تحسين رضا المواطنين** عبر وصول شكاواهم للأشخاص المناسبين بسرعة أكبر. **زيادة كفاءة الممثلين** من خلال تلقي شكاوى متناسبة مع خبراتهم وقدراتهم. **تقليل الأخطاء البشرية** في عملية التعيين والتوزيع.

### النتائج السلبية:

**تعقيد النظام** قد يتطلب وقتاً للضبط والتحسين المستمر للخوارزمية. **حاجة للمراقبة** لضمان عدم حدوث اختلالات في التوزيع أو تحيز غير مقصود. **اعتماد على البيانات** يتطلب معلومات دقيقة ومحدثة عن الممثلين وتخصصاتهم.

### استراتيجيات التخفيف:

**نظام مراقبة مستمر** لتتبع أداء الخوارزمية وتحديد أي مشاكل في التوزيع. **إمكانية التدخل اليدوي** للحالات الاستثنائية أو عند الحاجة لتعديل التعيين. **تحديث دوري للمعايير** بناءً على التغذية الراجعة والنتائج المحققة. **تدريب الممثلين** على النظام الجديد وكيفية إدارة الشكاوى المعينة لهم.

## خطة التطبيق

### المرحلة الأولى (الشهر الأول):
تطبيق التعيين الأساسي بناءً على المحافظة ونوع الشكوى فقط مع مراقبة النتائج وجمع التغذية الراجعة.

### المرحلة الثانية (الشهر الثاني):
إضافة معيار عبء العمل والتوزيع العادل مع تحسين الخوارزمية بناءً على نتائج المرحلة الأولى.

### المرحلة الثالثة (الشهر الثالث):
تطبيق النظام الكامل مع جميع المعايير والأوزان مع التحسين المستمر والضبط الدقيق.

## المراجعة والتقييم

### مؤشرات الأداء الرئيسية:
- متوسط وقت التعيين للشكاوى
- توزيع الأعباء بين الممثلين
- معدل رضا المواطنين عن سرعة الاستجابة
- كفاءة حل الشكاوى حسب التخصص

### جدولة المراجعة:
- **مراجعة أسبوعية:** خلال الشهر الأول
- **مراجعة شهرية:** بعد استقرار النظام  
- **مراجعة ربع سنوية:** لتحسين المعايير والأوزان

---

**آخر تحديث:** 2025-09-26  
**المسؤول:** فريق تطوير نائبك
